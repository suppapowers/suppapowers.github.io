<!DOCTYPE html><html><head><title>test</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /><script type="text/javascript">var Connection=function(){this.ws=null};Connection.prototype.connected=!1;var Block=function(){this.value=0};Block.size=32,Block.width=8,Block.height=4,Block.prototype.set=function(e,t){return t?this.value|=1<<e%Block.size:this.value&=~(1<<e%Block.size),this},Block.prototype.get=function(e){return!!(this.value&1<<e%Block.size)},Block.prototype.toString=function(){return this.toArray().map(function(e){return e?"1":"0"}).join("")};var Frame=function(){this.canvas=null,this.ctx=null,this.num=0,this.count=7,this.frames=[]};Frame.width=640,Frame.height=480,Frame.blockWidth=Frame.width/Block.width,Frame.blockHeight=Frame.height/Block.height,Frame.prototype.set=function(e){this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d")},Frame.prototype.update=function(e,t){return t?this.value|=1<<e%Block.size:this.value&=~(1<<e%Block.size),this},Frame.prototype.setRGBBlock=function(e,t,n,r){var s=new Block;s.value=e;var i=new Block;i.value=t;var o=new Block;o.value=n;for(var a=r%Frame.blockWidth,l=parseInt(r/Frame.blockWidth),u=new ImageData(Block.width,Block.height),c=0;c<Block.size;c++){var h=s.get(c)+2*i.get(c)+4*o.get(c);u.data[4*c]=_palette[h][0],u.data[4*c+1]=_palette[h][1],u.data[4*c+2]=_palette[h][2],u.data[4*c+3]=255}this.ctx.putImageData(u,a*Block.width,l*Block.height)},Frame.prototype.setRGBPixel=function(e,t,n){var r=new ImageData(1,1);r.data[0]=_palette[n][0],r.data[1]=_palette[n][1],r.data[2]=_palette[n][2],r.data[3]=255,this.ctx.putImageData(r,e,t)},Frame.prototype.clear=function(){this.ctx.fillStyle="rgb("+_palette[0][0]+","+_palette[0][1]+","+_palette[0][2]+")",this.ctx.fillRect(0,0,Frame.width,Frame.height)},Frame.prototype.switch=function(e,t){if(t&&0==e||!t&&e==this.num)return this.num;if(this.frames[this.num]=this.canvas.toDataURL("image/png"),this.clear(),this.num=this.numFormat(t?this.num+e:e),1==Connection.connected)_connection.send(this.num+","+_uid,!0);else{console.log("nc");var n=new Image;n.onload=function(){_frame.ctx.drawImage(n,0,0)},n.src=this.frames[this.num]}return this.onion(),this.num},Frame.prototype.onion=function(){this.frames[this.numFormat(this.num-1)]?(document.getElementById("prev").src=this.frames[this.numFormat(this.num-1)],document.getElementById("prev").style.display="block"):document.getElementById("prev").style.display="none",this.frames[this.numFormat(this.num+1)]?(document.getElementById("next").src=this.frames[this.numFormat(this.num+1)],document.getElementById("next").style.display="block"):document.getElementById("next").style.display="none"},Frame.prototype.numFormat=function(e){for(;e<0;)e+=this.count;return e%=this.count};var _palette=new Array;_palette.push([0,0,0,2]),_palette.push([200,255,61,1]),_palette.push([255,173,196,2]),_palette.push([255,61,109,1]),_palette.push([46,175,255,2]),_palette.push([43,255,193,1]),_palette.push([0,51,122,2]),_palette.push([255,245,242,1]);var _color=7,_halftone=0,_uid="",_uidHash=0,_onion=!0,brushes=new Array;function drawBrushes(){for(var e=1;e<=maxPressure;e++)drawBrush(e,60+20*e,100,1)}function updateHandles(){document.getElementsByClassName("noUi-handle-lower")[0].style.backgroundPositionX="-"+40.3*Math.round(minPressure)+"px",document.getElementsByClassName("noUi-handle-upper")[0].style.backgroundPositionX="-"+40.3*Math.round(maxPressure)+"px"}function makeGif(){for(var e=new GIF({workers:2,quality:10}),t=new Array,n=0;n<_frame.count;n++)t[n]=new Image,t[n].src=_frame[n],e.addFrame(t[n],{delay:100});e.on("finished",function(e){window.open(URL.createObjectURL(e))}),e.render()}function switchOnion(e){_onion?(_onion=!1,document.getElementById("onion").style.display="none",e.classList.remove("toggled")):(_onion=!0,document.getElementById("onion").style.display="block",e.classList.add("toggled"))}function switchHalftone(e){_halftone>0?(_halftone=0,e.classList.remove("toggled")):(_halftone=1,e.classList.add("toggled"))}function switchFrame(e,t=!0){var n=_frame.num,r=_frame.switch(e,t);document.getElementById("frame"+n).classList.remove("selected"),document.getElementById("frame"+r).classList.add("selected")}function makePalette(){for(var e="",t=0;t<_palette.length;t++)e+='<div class="square color'+(_color==t?" selected":"")+'" id="color'+t+'" onclick="switchColor('+t+')" style="background-color:rgb('+_palette[t][0]+", "+_palette[t][1]+", "+_palette[t][2]+')"></div>';document.getElementById("palette").innerHTML=e}function makeFrames(){for(var e="",t=0;t<_frame.count;t++)e+='<div class="square frame'+(_frame.num==t?" selected":"")+'" id="frame'+t+'" onclick="switchFrame('+t+', false)"><span>'+(t+1)+"</span></div>";document.getElementById("frames").innerHTML=e}function switchColor(e){document.getElementById("color"+_color).classList.remove("selected"),document.getElementById("color"+e).classList.add("selected"),_color=e,_halftone>0&&(_halftone=_palette[_color][3])}function makeBrush(e){var t=e,n=++e/2;n!=parseInt(n)?n-=.5:n+=.5;var r=n*n,s=e>4?Math.max(0,n-1.5):0,i=s*s;console.log(n);for(var o=new Array,a=new Array,l=-n;l<=n;l++)for(var u=-n;u<=n;u++){var c=l*l+u*u;c<=r&&(c>=i&&o.push([Math.round(l),Math.round(u)]),a.push([Math.round(l),Math.round(u)]))}brushes[t]=[o,a]}function drawBrush(e,t,n,r=0){if(0!=r&&(r=1),(e=Math.round(e))>=brushes.length&&(e=brushes.length-1),0==_halftone)for(var s=0;s<brushes[e][r].length;s++)_stroke.set(brushes[e][r][s][0]+t,brushes[e][r][s][1]+n,!0);else{var i=_halftone-1;for(s=0;s<brushes[e][r].length;s++){var o=brushes[e][r][s][0]+t,a=brushes[e][r][s][1]+n;(o+a)%2==i&&_stroke.set(o,a,!0)}}}function bresenham(e,t,n,r,s,i){if(n!=s||r!=i)for(var o=Math.abs(s-n),a=Math.abs(i-r),l=n<s?1:-1,u=r<i?1:-1,c=o-a,h=!(c>0);w=t-(t-e)*Math.abs(h?(r-i)/a:(n-s)/o),w>=1.5?drawBrush(w,n,r,0):0!=_halftone&&(n+r)%2!=_halftone-1||_stroke.set(n,r,!0),n!==s||r!==i;){var p=2*c;p>-a&&(c-=a,n+=l),p<o&&(c+=o,r+=u)}else drawBrush(Math.max(e,t),n,r,1)}function pixNum(e,t){var n=parseInt(e/Block.width),r=parseInt(t/Block.height);return[e%Block.width+t%Block.height*Block.width,n+r*Frame.blockWidth]}function hash(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t}var Stroke=function(){this.blocks=new Array,this.ids=new Array};Stroke.prototype.clear=function(e,t,n){this.blocks=new Array,this.ids=new Set},Stroke.prototype.set=function(e,t,n){_frame.setRGBPixel(e,t,_color*n);var r=pixNum(e,t);return null==this.ids[r[1]]&&(this.ids[r[1]]=this.blocks.length,this.blocks.push(new Block),this.blocks[this.blocks.length-1].id=r[1]),this.blocks[this.ids[r[1]]].set(r[0],n),r[1]},Stroke.prototype.get=function(){var e=new Int32Array(2*this.blocks.length+1+1);e[0]=_color%8,e[1]=_uidHash;for(var t=0,n=this.blocks.length;t<n;t++)e[2+t+t]=this.blocks[t].value,e[3+t+t]=this.blocks[t].id;return e},function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.noUiSlider=e()}(function(){"use strict";var e="14.2.0";function t(e){e.parentElement.removeChild(e)}function n(e){return null!=e}function r(e){e.preventDefault()}function s(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function i(e,t,n){0<n&&(u(e,t),setTimeout(function(){c(e,t)},n))}function o(e){return Math.max(Math.min(e,100),0)}function a(e){return Array.isArray(e)?e:[e]}function l(e){var t=(e=String(e)).split(".");return 1<t.length?t[1].length:0}function u(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(e){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:n?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:n?e.documentElement.scrollTop:e.body.scrollTop}}function p(e,t){return 100/(t-e)}function d(e,t){return 100*t/(e[1]-e[0])}function f(e,t){for(var n=1;e>=t[n];)n+=1;return n}function m(t,n,r){var i;if("number"==typeof n&&(n=[n]),!Array.isArray(n))throw new Error("noUiSlider ("+e+"): 'range' contains invalid value.");if(!s(i="min"===t?0:"max"===t?100:parseFloat(t))||!s(n[0]))throw new Error("noUiSlider ("+e+"): 'range' value isn't numeric.");r.xPct.push(i),r.xVal.push(n[0]),i?r.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(r.xSteps[0]=n[1]),r.xHighestCompleteStep.push(0)}function g(e,t,n){if(t)if(n.xVal[e]!==n.xVal[e+1]){n.xSteps[e]=d([n.xVal[e],n.xVal[e+1]],t)/p(n.xPct[e],n.xPct[e+1]);var r=(n.xVal[e+1]-n.xVal[e])/n.xNumSteps[e],s=Math.ceil(Number(r.toFixed(3))-1),i=n.xVal[e]+n.xNumSteps[e]*s;n.xHighestCompleteStep[e]=i}else n.xSteps[e]=n.xHighestCompleteStep[e]=n.xVal[e]}function v(e,t,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=t;var s=[];for(r in e)e.hasOwnProperty(r)&&s.push([e[r],r]);for(s.length&&"object"==typeof s[0][0]?s.sort(function(e,t){return e[0][0]-t[0][0]}):s.sort(function(e,t){return e[0]-t[0]}),r=0;r<s.length;r++)m(s[r][1],s[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)g(r,this.xNumSteps[r],this)}v.prototype.getMargin=function(t){var n=this.xNumSteps[0];if(n&&t/n%1!=0)throw new Error("noUiSlider ("+e+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&d(this.xVal,t)},v.prototype.toStepping=function(e){return function(e,t,n){if(n>=e.slice(-1)[0])return 100;var r,s,i=f(n,e),o=e[i-1],a=e[i],l=t[i-1],u=t[i];return l+(s=n,d(r=[o,a],r[0]<0?s+Math.abs(r[0]):s-r[0])/p(l,u))}(this.xVal,this.xPct,e)},v.prototype.fromStepping=function(e){return function(e,t,n){if(100<=n)return e.slice(-1)[0];var r,s=f(n,t),i=e[s-1],o=e[s],a=t[s-1];return r=[i,o],(n-a)*p(a,t[s])*(r[1]-r[0])/100+r[0]}(this.xVal,this.xPct,e)},v.prototype.getStep=function(e){return function(e,t,n,r){if(100===r)return r;var s,i,o=f(r,e),a=e[o-1],l=e[o];return n?(l-a)/2<r-a?l:a:t[o-1]?e[o-1]+(s=r-e[o-1],i=t[o-1],Math.round(s/i)*i):r}(this.xPct,this.xSteps,this.snap,e)},v.prototype.getDefaultStep=function(e,t,n){var r=f(e,this.xPct);return(100===e||t&&e===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},v.prototype.getNearbySteps=function(e){var t=f(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},v.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(l);return Math.max.apply(null,e)},v.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var y={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number};function w(t){if("object"==typeof(n=t)&&"function"==typeof n.to&&"function"==typeof n.from)return!0;var n;throw new Error("noUiSlider ("+e+"): 'format' requires 'to' and 'from' methods.")}function b(t,n){if(!s(n))throw new Error("noUiSlider ("+e+"): 'step' is not numeric.");t.singleStep=n}function x(t,n){if("object"!=typeof n||Array.isArray(n))throw new Error("noUiSlider ("+e+"): 'range' is not an object.");if(void 0===n.min||void 0===n.max)throw new Error("noUiSlider ("+e+"): Missing 'min' or 'max' in 'range'.");if(n.min===n.max)throw new Error("noUiSlider ("+e+"): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new v(n,t.snap,t.singleStep)}function S(t,n){if(n=a(n),!Array.isArray(n)||!n.length)throw new Error("noUiSlider ("+e+"): 'start' option is incorrect.");t.handles=n.length,t.start=n}function k(t,n){if("boolean"!=typeof(t.snap=n))throw new Error("noUiSlider ("+e+"): 'snap' option must be a boolean.")}function P(t,n){if("boolean"!=typeof(t.animate=n))throw new Error("noUiSlider ("+e+"): 'animate' option must be a boolean.")}function E(t,n){if("number"!=typeof(t.animationDuration=n))throw new Error("noUiSlider ("+e+"): 'animationDuration' option must be a number.")}function _(t,n){var r,s=[!1];if("lower"===n?n=[!0,!1]:"upper"===n&&(n=[!1,!0]),!0===n||!1===n){for(r=1;r<t.handles;r++)s.push(n);s.push(!1)}else{if(!Array.isArray(n)||!n.length||n.length!==t.handles+1)throw new Error("noUiSlider ("+e+"): 'connect' option doesn't match handle count.");s=n}t.connect=s}function C(t,n){switch(n){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider ("+e+"): 'orientation' option is invalid.")}}function B(t,n){if(!s(n))throw new Error("noUiSlider ("+e+"): 'margin' option must be numeric.");if(0!==n&&(t.margin=t.spectrum.getMargin(n),!t.margin))throw new Error("noUiSlider ("+e+"): 'margin' option is only supported on linear sliders.")}function M(t,n){if(!s(n))throw new Error("noUiSlider ("+e+"): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(n),!t.limit||t.handles<2)throw new Error("noUiSlider ("+e+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function F(t,n){if(!s(n)&&!Array.isArray(n))throw new Error("noUiSlider ("+e+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(n)&&2!==n.length&&!s(n[0])&&!s(n[1]))throw new Error("noUiSlider ("+e+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==n){if(Array.isArray(n)||(n=[n,n]),!(t.padding=[t.spectrum.getMargin(n[0]),t.spectrum.getMargin(n[1])])===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider ("+e+"): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider ("+e+"): 'padding' option must be a positive number(s).");if(100<t.padding[0]+t.padding[1])throw new Error("noUiSlider ("+e+"): 'padding' option must not exceed 100% of the range.")}}function U(t,n){switch(n){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider ("+e+"): 'direction' option was not recognized.")}}function N(t,n){if("string"!=typeof n)throw new Error("noUiSlider ("+e+"): 'behaviour' must be a string containing options.");var r=0<=n.indexOf("tap"),s=0<=n.indexOf("drag"),i=0<=n.indexOf("fixed"),o=0<=n.indexOf("snap"),a=0<=n.indexOf("hover"),l=0<=n.indexOf("unconstrained");if(i){if(2!==t.handles)throw new Error("noUiSlider ("+e+"): 'fixed' behaviour must be used with 2 handles");B(t,t.start[1]-t.start[0])}if(l&&(t.margin||t.limit))throw new Error("noUiSlider ("+e+"): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:s,fixed:i,snap:o,hover:a,unconstrained:l}}function D(t,n){if(!1!==n)if(!0===n){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=a(n),t.tooltips.length!==t.handles)throw new Error("noUiSlider ("+e+"): must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider ("+e+"): 'tooltips' must be passed a formatter or 'false'.")})}}function A(e,t){w(e.ariaFormat=t)}function L(e,t){w(e.format=t)}function O(t,n){if("boolean"!=typeof(t.keyboardSupport=n))throw new Error("noUiSlider ("+e+"): 'keyboardSupport' option must be a boolean.")}function I(e,t){e.documentElement=t}function T(t,n){if("string"!=typeof n&&!1!==n)throw new Error("noUiSlider ("+e+"): 'cssPrefix' must be a string or `false`.");t.cssPrefix=n}function V(t,n){if("object"!=typeof n)throw new Error("noUiSlider ("+e+"): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},n)n.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+n[r]);else t.cssClasses=n}function H(t){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:y,format:y},s={step:{r:!1,t:b},start:{r:!0,t:S},connect:{r:!0,t:_},direction:{r:!0,t:U},snap:{r:!1,t:k},animate:{r:!1,t:P},animationDuration:{r:!1,t:E},range:{r:!0,t:x},orientation:{r:!1,t:C},margin:{r:!1,t:B},limit:{r:!1,t:M},padding:{r:!1,t:F},behaviour:{r:!0,t:N},ariaFormat:{r:!1,t:A},format:{r:!1,t:L},tooltips:{r:!1,t:D},keyboardSupport:{r:!0,t:O},documentElement:{r:!1,t:I},cssPrefix:{r:!0,t:T},cssClasses:{r:!0,t:V}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(s).forEach(function(o){if(!n(t[o])&&void 0===i[o]){if(s[o].r)throw new Error("noUiSlider ("+e+"): '"+o+"' is required.");return!0}s[o].t(r,n(t[o])?t[o]:i[o])}),r.pips=t.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,l=void 0!==o.style.transform;return r.transformRule=l?"transform":a?"msTransform":"webkitTransform",r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}return{__spectrum:v,version:e,create:function(n,s){if(!n||!n.nodeName)throw new Error("noUiSlider ("+e+"): create requires a single element, got: "+n);if(n.noUiSlider)throw new Error("noUiSlider ("+e+"): Slider was already initialized.");var l=function(n,s,l){var p,d,f,m,g,v,y,w,b=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},x=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),S=n,k=s.spectrum,P=[],E=[],_=[],C=0,B={},M=n.ownerDocument,F=s.documentElement||M.documentElement,U=M.body,N=-1,D=0,A=1,L=2,O="rtl"===M.dir||1===s.ort?0:100;function I(e,t){var n=M.createElement("div");return t&&u(n,t),e.appendChild(n),n}function T(e,t){var n=I(e,s.cssClasses.origin),r=I(n,s.cssClasses.handle);return I(r,s.cssClasses.touchArea),r.setAttribute("data-handle",t),s.keyboardSupport&&(r.setAttribute("tabindex","0"),r.addEventListener("keydown",function(e){return function(e,t){if(z()||R(t))return!1;var n=["Left","Right"],r=["Down","Up"],i=["PageDown","PageUp"],o=["Home","End"];s.dir&&!s.ort?n.reverse():s.ort&&!s.dir&&(r.reverse(),i.reverse());var a,l=e.key.replace("Arrow",""),u=l===i[0],c=l===i[1],h=l===r[0]||l===n[0]||u,p=l===r[1]||l===n[1]||c,d=l===o[1];if(!(h||p||l===o[0]||d))return!0;if(e.preventDefault(),p||h){var f=h?0:1,m=me(t)[f];if(null===m)return!1;!1===m&&(m=k.getDefaultStep(E[t],h,10)),(c||u)&&(m*=5),m=Math.max(m,1e-7),m*=h?-1:1,a=P[t]+m}else a=d?s.spectrum.xVal[s.spectrum.xVal.length-1]:s.spectrum.xVal[0];return ce(t,k.toStepping(a),!0,!0),se("slide",t),se("update",t),se("change",t),se("set",t),!1}(e,t)})),r.setAttribute("role","slider"),r.setAttribute("aria-orientation",s.ort?"vertical":"horizontal"),0===t?u(r,s.cssClasses.handleLower):t===s.handles-1&&u(r,s.cssClasses.handleUpper),n}function V(e,t){return!!t&&I(e,s.cssClasses.connect)}function j(e,t){return!!s.tooltips[t]&&I(e.firstChild,s.cssClasses.tooltip)}function z(){return S.hasAttribute("disabled")}function R(e){return d[e].hasAttribute("disabled")}function X(){g&&(re("update.tooltips"),g.forEach(function(e){e&&t(e)}),g=null)}function Y(){X(),g=d.map(j),ne("update.tooltips",function(e,t,n){if(g[t]){var r=e[t];!0!==s.tooltips[t]&&(r=s.tooltips[t].to(n[t])),g[t].innerHTML=r}})}function q(e,t,n){var r=M.createElement("div"),i=[];i[D]=s.cssClasses.valueNormal,i[A]=s.cssClasses.valueLarge,i[L]=s.cssClasses.valueSub;var o=[];o[D]=s.cssClasses.markerNormal,o[A]=s.cssClasses.markerLarge,o[L]=s.cssClasses.markerSub;var a=[s.cssClasses.valueHorizontal,s.cssClasses.valueVertical],l=[s.cssClasses.markerHorizontal,s.cssClasses.markerVertical];function c(e,t){var n=t===s.cssClasses.value,r=n?i:o;return t+" "+(n?a:l)[s.ort]+" "+r[e]}return u(r,s.cssClasses.pips),u(r,0===s.ort?s.cssClasses.pipsHorizontal:s.cssClasses.pipsVertical),Object.keys(e).forEach(function(i){!function(e,i,o){if((o=t?t(i,o):o)!==N){var a=I(r,!1);a.className=c(o,s.cssClasses.marker),a.style[s.style]=e+"%",D<o&&((a=I(r,!1)).className=c(o,s.cssClasses.value),a.setAttribute("data-value",i),a.style[s.style]=e+"%",a.innerHTML=n.to(i))}}(i,e[i][0],e[i][1])}),r}function K(){m&&(t(m),m=null)}function W(t){K();var n,r,s,i,o,a,l,u,c,h=t.mode,p=t.density||1,d=t.filter||!1,f=function(t,n,r){if("range"===t||"steps"===t)return k.xVal;if("count"===t){if(n<2)throw new Error("noUiSlider ("+e+"): 'values' (>= 2) required for mode 'count'.");var s=n-1,i=100/s;for(n=[];s--;)n[s]=s*i;n.push(100),t="positions"}return"positions"===t?n.map(function(e){return k.fromStepping(r?k.getStep(e):e)}):"values"===t?r?n.map(function(e){return k.fromStepping(k.getStep(k.toStepping(e)))}):n:void 0}(h,t.values||!1,t.stepped||!1),g=(n=p,r=h,s=f,i={},o=k.xVal[0],a=k.xVal[k.xVal.length-1],u=l=!1,c=0,(s=s.slice().sort(function(e,t){return e-t}).filter(function(e){return!this[e]&&(this[e]=!0)},{}))[0]!==o&&(s.unshift(o),l=!0),s[s.length-1]!==a&&(s.push(a),u=!0),s.forEach(function(e,t){var o,a,h,p,d,f,m,g,v,y,w=e,b=s[t+1],x="steps"===r;if(x&&(o=k.xNumSteps[t]),o||(o=b-w),!1!==w&&void 0!==b)for(o=Math.max(o,1e-7),a=w;a<=b;a=(a+o).toFixed(7)/1){for(g=(d=(p=k.toStepping(a))-c)/n,y=d/(v=Math.round(g)),h=1;h<=v;h+=1)i[(f=c+h*y).toFixed(5)]=[k.fromStepping(f),0];m=-1<s.indexOf(a)?A:x?L:D,!t&&l&&a!==b&&(m=0),a===b&&u||(i[p.toFixed(5)]=[a,m]),c=p}}),i),v=t.format||{to:Math.round};return m=S.appendChild(q(g,d,v))}function G(){var e=p.getBoundingClientRect(),t="offset"+["Width","Height"][s.ort];return 0===s.ort?e.width||p[t]:e.height||p[t]}function $(e,t,n,r){var i=function(i){return!!(i=function(e,t,n){var r,s,i=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),a=0===e.type.indexOf("pointer");if(0===e.type.indexOf("MSPointer")&&(a=!0),i){var l=function(e){return e.target===n||n.contains(e.target)||e.target.shadowRoot&&e.target.shadowRoot.contains(n)};if("touchstart"===e.type){var u=Array.prototype.filter.call(e.touches,l);if(1<u.length)return!1;r=u[0].pageX,s=u[0].pageY}else{var c=Array.prototype.find.call(e.changedTouches,l);if(!c)return!1;r=c.pageX,s=c.pageY}}return t=t||h(M),(o||a)&&(r=e.clientX+t.x,s=e.clientY+t.y),e.pageOffset=t,e.points=[r,s],e.cursor=o||a,e}(i,r.pageOffset,r.target||t))&&!(z()&&!r.doNotReject)&&(o=S,a=s.cssClasses.tap,!((o.classList?o.classList.contains(a):new RegExp("\\b"+a+"\\b").test(o.className))&&!r.doNotReject)&&!(e===b.start&&void 0!==i.buttons&&1<i.buttons)&&(!r.hover||!i.buttons)&&(x||i.preventDefault(),i.calcPoint=i.points[s.ort],void n(i,r)));var o,a},o=[];return e.split(" ").forEach(function(e){t.addEventListener(e,i,!!x&&{passive:!0}),o.push([e,i])}),o}function J(e){var t,n,r,i,a,l,u=100*(e-(t=p,n=s.ort,r=t.getBoundingClientRect(),a=(i=t.ownerDocument).documentElement,l=h(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),n?r.top+l.y-a.clientTop:r.left+l.x-a.clientLeft))/G();return u=o(u),s.dir?100-u:u}function Q(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&ee(e,t)}function Z(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return ee(e,t);var n=(s.dir?-1:1)*(e.calcPoint-t.startCalcPoint);ae(0<n,100*n/t.baseSize,t.locations,t.handleNumbers)}function ee(e,t){t.handle&&(c(t.handle,s.cssClasses.active),C-=1),t.listeners.forEach(function(e){F.removeEventListener(e[0],e[1])}),0===C&&(c(S,s.cssClasses.drag),ue(),e.cursor&&(U.style.cursor="",U.removeEventListener("selectstart",r))),t.handleNumbers.forEach(function(e){se("change",e),se("set",e),se("end",e)})}function te(e,t){if(t.handleNumbers.some(R))return!1;var n;1===t.handleNumbers.length&&(n=d[t.handleNumbers[0]].children[0],C+=1,u(n,s.cssClasses.active)),e.stopPropagation();var i=[],o=$(b.move,F,Z,{target:e.target,handle:n,listeners:i,startCalcPoint:e.calcPoint,baseSize:G(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:E.slice()}),a=$(b.end,F,ee,{target:e.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:t.handleNumbers}),l=$("mouseout",F,Q,{target:e.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:t.handleNumbers});i.push.apply(i,o.concat(a,l)),e.cursor&&(U.style.cursor=getComputedStyle(e.target).cursor,1<d.length&&u(S,s.cssClasses.drag),U.addEventListener("selectstart",r,!1)),t.handleNumbers.forEach(function(e){se("start",e)})}function ne(e,t){B[e]=B[e]||[],B[e].push(t),"update"===e.split(".")[0]&&d.forEach(function(e,t){se("update",t)})}function re(e){var t=e&&e.split(".")[0],n=t&&e.substring(t.length);Object.keys(B).forEach(function(e){var r=e.split(".")[0],s=e.substring(r.length);t&&t!==r||n&&n!==s||delete B[e]})}function se(e,t,n){Object.keys(B).forEach(function(r){var i=r.split(".")[0];e===i&&B[r].forEach(function(e){e.call(v,P.map(s.format.to),t,P.slice(),n||!1,E.slice(),v)})})}function ie(e,t,n,r,i,a){return 1<d.length&&!s.events.unconstrained&&(r&&0<t&&(n=Math.max(n,e[t-1]+s.margin)),i&&t<d.length-1&&(n=Math.min(n,e[t+1]-s.margin))),1<d.length&&s.limit&&(r&&0<t&&(n=Math.min(n,e[t-1]+s.limit)),i&&t<d.length-1&&(n=Math.max(n,e[t+1]-s.limit))),s.padding&&(0===t&&(n=Math.max(n,s.padding[0])),t===d.length-1&&(n=Math.min(n,100-s.padding[1]))),!((n=o(n=k.getStep(n)))===e[t]&&!a)&&n}function oe(e,t){var n=s.ort;return(n?t:e)+", "+(n?e:t)}function ae(e,t,n,r){var s=n.slice(),i=[!e,e],o=[e,!e];r=r.slice(),e&&r.reverse(),1<r.length?r.forEach(function(e,n){var r=ie(s,e,s[e]+t,i[n],o[n],!1);!1===r?t=0:(t=r-s[e],s[e]=r)}):i=o=[!0];var a=!1;r.forEach(function(e,r){a=ce(e,n[e]+t,i[r],o[r])||a}),a&&r.forEach(function(e){se("update",e),se("slide",e)})}function le(e,t){return s.dir?100-e-t:e}function ue(){_.forEach(function(e){var t=50<E[e]?-1:1,n=3+(d.length+t*e);d[e].style.zIndex=n})}function ce(e,t,n,r){return!1!==(t=ie(E,e,t,n,r,!1))&&(function(e,t){E[e]=t,P[e]=k.fromStepping(t);var n="translate("+oe(10*(le(t,0)-O)+"%","0")+")";d[e].style[s.transformRule]=n,he(e),he(e+1)}(e,t),!0)}function he(e){if(f[e]){var t=0,n=100;0!==e&&(t=E[e-1]),e!==f.length-1&&(n=E[e]);var r=n-t,i="translate("+oe(le(t,r)+"%","0")+")",o="scale("+oe(r/100,"1")+")";f[e].style[s.transformRule]=i+" "+o}}function pe(e,t){return null===e||!1===e||void 0===e?E[t]:("number"==typeof e&&(e=String(e)),e=s.format.from(e),!1===(e=k.toStepping(e))||isNaN(e)?E[t]:e)}function de(e,t){var n=a(e),r=void 0===E[0];t=void 0===t||!!t,s.animate&&!r&&i(S,s.cssClasses.tap,s.animationDuration),_.forEach(function(e){ce(e,pe(n[e],e),!0,!1)});for(var o=1===_.length?0:1;o<_.length;++o)_.forEach(function(e){ce(e,E[e],!0,!0)});ue(),_.forEach(function(e){se("update",e),null!==n[e]&&t&&se("set",e)})}function fe(){var e=P.map(s.format.to);return 1===e.length?e[0]:e}function me(e){var t=E[e],n=k.getNearbySteps(t),r=P[e],i=n.thisStep.step,o=null;if(s.snap)return[r-n.stepBefore.startValue||null,n.stepAfter.startValue-r||null];!1!==i&&r+i>n.stepAfter.startValue&&(i=n.stepAfter.startValue-r),o=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===t?i=null:0===t&&(o=null);var a=k.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]}return u(y=S,s.cssClasses.target),0===s.dir?u(y,s.cssClasses.ltr):u(y,s.cssClasses.rtl),0===s.ort?u(y,s.cssClasses.horizontal):u(y,s.cssClasses.vertical),u(y,"rtl"===getComputedStyle(y).direction?s.cssClasses.textDirectionRtl:s.cssClasses.textDirectionLtr),p=I(y,s.cssClasses.base),function(e,t){var n=I(t,s.cssClasses.connects);d=[],(f=[]).push(V(n,e[0]));for(var r=0;r<s.handles;r++)d.push(T(t,r)),_[r]=r,f.push(V(n,e[r+1]))}(s.connect,p),(w=s.events).fixed||d.forEach(function(e,t){$(b.start,e.children[0],te,{handleNumbers:[t]})}),w.tap&&$(b.start,p,function(e){e.stopPropagation();var t,n,r,o=J(e.calcPoint),a=(t=o,r=!(n=100),d.forEach(function(e,s){if(!R(s)){var i=E[s],o=Math.abs(i-t);(o<n||o<=n&&i<t||100===o&&100===n)&&(r=s,n=o)}}),r);if(!1===a)return!1;s.events.snap||i(S,s.cssClasses.tap,s.animationDuration),ce(a,o,!0,!0),ue(),se("slide",a,!0),se("update",a,!0),se("change",a,!0),se("set",a,!0),s.events.snap&&te(e,{handleNumbers:[a]})},{}),w.hover&&$(b.move,p,function(e){var t=J(e.calcPoint),n=k.getStep(t),r=k.fromStepping(n);Object.keys(B).forEach(function(e){"hover"===e.split(".")[0]&&B[e].forEach(function(e){e.call(v,r)})})},{hover:!0}),w.drag&&f.forEach(function(e,t){if(!1!==e&&0!==t&&t!==f.length-1){var n=d[t-1],r=d[t],i=[e];u(e,s.cssClasses.draggable),w.fixed&&(i.push(n.children[0]),i.push(r.children[0])),i.forEach(function(e){$(b.start,e,te,{handles:[n,r],handleNumbers:[t-1,t]})})}}),de(s.start),s.pips&&W(s.pips),s.tooltips&&Y(),ne("update",function(e,t,n,r,i){_.forEach(function(e){var t=d[e],r=ie(E,e,0,!0,!0,!0),o=ie(E,e,100,!0,!0,!0),a=i[e],l=s.ariaFormat.to(n[e]);r=k.fromStepping(r).toFixed(1),o=k.fromStepping(o).toFixed(1),a=k.fromStepping(a).toFixed(1),t.children[0].setAttribute("aria-valuemin",r),t.children[0].setAttribute("aria-valuemax",o),t.children[0].setAttribute("aria-valuenow",a),t.children[0].setAttribute("aria-valuetext",l)})}),v={destroy:function(){for(var e in s.cssClasses)s.cssClasses.hasOwnProperty(e)&&c(S,s.cssClasses[e]);for(;S.firstChild;)S.removeChild(S.firstChild);delete S.noUiSlider},steps:function(){return _.map(me)},on:ne,off:re,get:fe,set:de,setHandle:function(t,n,r){if(!(0<=(t=Number(t))&&t<_.length))throw new Error("noUiSlider ("+e+"): invalid handle number, got: "+t);ce(t,pe(n,t),!0,!0),se("update",t),r&&se("set",t)},reset:function(e){de(s.start,e)},__moveHandles:function(e,t,n){ae(e,t,E,n)},options:l,updateOptions:function(e,t){var n=fe(),r=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];r.forEach(function(t){void 0!==e[t]&&(l[t]=e[t])});var i=H(l);r.forEach(function(t){void 0!==e[t]&&(s[t]=i[t])}),k=i.spectrum,s.margin=i.margin,s.limit=i.limit,s.padding=i.padding,s.pips?W(s.pips):K(),s.tooltips?Y():X(),E=[],de(e.start||n,t)},target:S,removePips:K,removeTooltips:X,pips:W}}(n,H(s),s);return n.noUiSlider=l}}}),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Pressure=t()}(this,function(){"use strict";function e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={set:function(e,t,n){p(e,t,n)},config:function(e){h.set(e)},map:function(e,t,n,r,s){return f.apply(null,arguments)}},o=function(){function e(t,r,s){n(this,e),this.routeEvents(t,r,s),this.preventSelect(t,s)}return s(e,[{key:"routeEvents",value:function(e,t,n){var r=h.get("only",n);this.adapter=!v||"pointer"!==r&&null!==r?!g||"touch"!==r&&null!==r?!m||"mouse"!==r&&null!==r?new a(e,t).bindUnsupportedEvent():new l(e,t,n).bindEvents():new u(e,t,n).bindEvents():new c(e,t,n).bindEvents()}},{key:"preventSelect",value:function(e,t){h.get("preventSelect",t)&&(e.style.webkitTouchCallout="none",e.style.webkitUserSelect="none",e.style.khtmlUserSelect="none",e.style.MozUserSelect="none",e.style.msUserSelect="none",e.style.userSelect="none")}}]),e}(),a=function(){function e(t,r,s){n(this,e),this.el=t,this.block=r,this.options=s,this.pressed=!1,this.deepPressed=!1,this.nativeSupport=!1,this.runningPolyfill=!1,this.runKey=Math.random()}return s(e,[{key:"setPressed",value:function(e){this.pressed=e}},{key:"setDeepPressed",value:function(e){this.deepPressed=e}},{key:"isPressed",value:function(){return this.pressed}},{key:"isDeepPressed",value:function(){return this.deepPressed}},{key:"add",value:function(e,t){this.el.addEventListener(e,t,!1)}},{key:"runClosure",value:function(e){e in this.block&&this.block[e].apply(this.el,Array.prototype.slice.call(arguments,1))}},{key:"fail",value:function(e,t){h.get("polyfill",this.options)?this.runKey===t&&this.runPolyfill(e):this.runClosure("unsupported",e)}},{key:"bindUnsupportedEvent",value:function(){var e=this;this.add(g?"touchstart":"mousedown",function(t){return e.runClosure("unsupported",t)})}},{key:"_startPress",value:function(e){!1===this.isPressed()&&(this.runningPolyfill=!1,this.setPressed(!0),this.runClosure("start",e))}},{key:"_startDeepPress",value:function(e){this.isPressed()&&!1===this.isDeepPressed()&&(this.setDeepPressed(!0),this.runClosure("startDeepPress",e))}},{key:"_changePress",value:function(e,t){this.nativeSupport=!0,this.runClosure("change",e,t)}},{key:"_endDeepPress",value:function(){this.isPressed()&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress"))}},{key:"_endPress",value:function(){!1===this.runningPolyfill?(this.isPressed()&&(this._endDeepPress(),this.setPressed(!1),this.runClosure("end")),this.runKey=Math.random(),this.nativeSupport=!1):this.setPressed(!1)}},{key:"deepPress",value:function(e,t){e>=.5?this._startDeepPress(t):this._endDeepPress()}},{key:"runPolyfill",value:function(e){this.increment=0===h.get("polyfillSpeedUp",this.options)?1:10/h.get("polyfillSpeedUp",this.options),this.decrement=0===h.get("polyfillSpeedDown",this.options)?1:10/h.get("polyfillSpeedDown",this.options),this.setPressed(!0),this.runClosure("start",e),!1===this.runningPolyfill&&this.loopPolyfillForce(0,e)}},{key:"loopPolyfillForce",value:function(e,t){!1===this.nativeSupport&&(this.isPressed()?(this.runningPolyfill=!0,e=e+this.increment>1?1:e+this.increment,this.runClosure("change",e,t),this.deepPress(e,t),setTimeout(this.loopPolyfillForce.bind(this,e,t),10)):((e=e-this.decrement<0?0:e-this.decrement)<.5&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress")),0===e?(this.runningPolyfill=!1,this.setPressed(!0),this._endPress()):(this.runClosure("change",e,t),this.deepPress(e,t),setTimeout(this.loopPolyfillForce.bind(this,e,t),10))))}}]),e}(),l=function(r){function i(t,r,s){return n(this,i),e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,r,s))}return t(i,a),s(i,[{key:"bindEvents",value:function(){this.add("webkitmouseforcewillbegin",this._startPress.bind(this)),this.add("mousedown",this.support.bind(this)),this.add("webkitmouseforcechanged",this.change.bind(this)),this.add("webkitmouseforcedown",this._startDeepPress.bind(this)),this.add("webkitmouseforceup",this._endDeepPress.bind(this)),this.add("mouseleave",this._endPress.bind(this)),this.add("mouseup",this._endPress.bind(this))}},{key:"support",value:function(e){!1===this.isPressed()&&this.fail(e,this.runKey)}},{key:"change",value:function(e){this.isPressed()&&e.webkitForce>0&&this._changePress(this.normalizeForce(e.webkitForce),e)}},{key:"normalizeForce",value:function(e){return this.reachOne(f(e,1,3,0,1))}},{key:"reachOne",value:function(e){return e>.995?1:e}}]),i}(),u=function(r){function i(t,r,s){return n(this,i),e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,r,s))}return t(i,a),s(i,[{key:"bindEvents",value:function(){w?(this.add("touchforcechange",this.start.bind(this)),this.add("touchstart",this.support.bind(this,0)),this.add("touchend",this._endPress.bind(this))):(this.add("touchstart",this.startLegacy.bind(this)),this.add("touchend",this._endPress.bind(this)))}},{key:"start",value:function(e){e.touches.length>0&&(this._startPress(e),this.touch=this.selectTouch(e),this.touch&&this._changePress(this.touch.force,e))}},{key:"support",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.runKey;!1===this.isPressed()&&(e<=6?(e++,setTimeout(this.support.bind(this,e,t,n),10)):this.fail(t,n))}},{key:"startLegacy",value:function(e){this.initialForce=e.touches[0].force,this.supportLegacy(0,e,this.runKey,this.initialForce)}},{key:"supportLegacy",value:function(e,t,n,r){r!==this.initialForce?(this._startPress(t),this.loopForce(t)):e<=6?(e++,setTimeout(this.supportLegacy.bind(this,e,t,n,r),10)):this.fail(t,n)}},{key:"loopForce",value:function(e){this.isPressed()&&(this.touch=this.selectTouch(e),setTimeout(this.loopForce.bind(this,e),10),this._changePress(this.touch.force,e))}},{key:"selectTouch",value:function(e){if(1===e.touches.length)return this.returnTouch(e.touches[0],e);for(var t=0;t<e.touches.length;t++)if(e.touches[t].target===this.el||this.el.contains(e.touches[t].target))return this.returnTouch(e.touches[t],e)}},{key:"returnTouch",value:function(e,t){return this.deepPress(e.force,t),e}}]),i}(),c=function(r){function i(t,r,s){return n(this,i),e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,r,s))}return t(i,a),s(i,[{key:"bindEvents",value:function(){this.add("pointerdown",this.support.bind(this)),this.add("pointermove",this.change.bind(this)),this.add("pointerup",this._endPress.bind(this)),this.add("pointerleave",this._endPress.bind(this))}},{key:"support",value:function(e){!1===this.isPressed()&&(0===e.pressure||.5===e.pressure||e.pressure>1?this.fail(e,this.runKey):(this._startPress(e),this._changePress(e.pressure,e)))}},{key:"change",value:function(e){this.isPressed()&&e.pressure>0&&.5!==e.pressure&&(this._changePress(e.pressure,e),this.deepPress(e.pressure,e))}}]),i}(),h={polyfill:!0,polyfillSpeedUp:1e3,polyfillSpeedDown:0,preventSelect:!0,only:null,get:function(e,t){return t.hasOwnProperty(e)?t[e]:this[e]},set:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&"get"!=t&&"set"!=t&&(this[t]=e[t])}},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e||e instanceof String)for(var r=document.querySelectorAll(e),s=0;s<r.length;s++)new o(r[s],t,n);else if(d(e))new o(e,t,n);else for(s=0;s<e.length;s++)new o(e[s],t,n)},d=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":r(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":r(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},f=function(e,t,n,r,s){return(e-t)*(s-r)/(n-t)+r},m=!1,g=!1,v=!1,y=!1,w=!1;if("undefined"!=typeof window){if("undefined"!=typeof Touch)try{(Touch.prototype.hasOwnProperty("force")||"force"in new Touch)&&(y=!0)}catch(e){}g="ontouchstart"in window.document&&y,m="onmousemove"in window.document&&!g,v="onpointermove"in window.document,w="ontouchforcechange"in window.document}return i});var c,cx=0,cy=0,cdown=!1,cpr0=0,cprT=0,cpr1=0,lineDetail=20,minPressure=0,maxPressure=7,scale=1,_connection=new Connection,_frame=new Frame,_stroke=new Stroke;function init(){windowResize();for(var e=1;e<=maxPressure;e++)makeBrush(e);Pressure.set("#canvas",{start:function(e){cpr0=0,console.log("pstaart")},end:function(){cprT=0,console.log("peeeend")},change:function(e,t){cprT=e}}),makePalette(),makeFrames(),(_frame=new Frame).set("canvas"),_frame.clear(),document.onkeyup=keyUp,document.addEventListener("gesturestart",function(e){e.preventDefault()});var t=document.getElementById("brush");noUiSlider.create(t,{start:[0,maxPressure],connect:!0,range:{min:0,max:maxPressure}}),t.noUiSlider.on("update",function(e,t){minPressure=Math.min(e[0],e[1]),maxPressure=Math.max(e[0],e[1]),updateHandles()})}function keyUp(e){"37"==(e=e||window.event).keyCode?switchFrame(-1):"39"==e.keyCode&&switchFrame(1)}function sendData(){_stroke.clear()}function line(e,t,n,r){cpr0=cpr1,cpr1+=(cprT-cpr1)/5,bresenham(Math.min(minPressure+cpr0*maxPressure,maxPressure),Math.min(minPressure+cpr1*maxPressure,maxPressure),Math.round(e*scale),Math.round(t*scale),Math.round(n*scale),Math.round(r*scale))}function touchMove(e){for(var t=document.getElementById("surface").getBoundingClientRect(),n=e.touches[0].clientX-t.left,r=e.touches[0].clientY-t.top,s=1;s<e.touches.length;s++)"stylus"===e.touches[s].touchType&&(n=e.touches[0].clientX-t.left,r=e.touches[0].clientY-t.top);if(!cdown)return cx=n,void(cy=r);(Math.pow(n-cx,2)+Math.pow(r-cy,2)>=lineDetail||cprT-cpr0>.3)&&(line(cx,cy,n,r),cx=n,cy=r)}var _mouseMoving=!1,_mouseInterval=0;function mouseMove(e){if(_mouseMoving=!0,!cdown)return cx=e.offsetX,void(cy=e.offsetY);(Math.pow(e.offsetX-cx,2)+Math.pow(e.offsetY-cy,2)>=lineDetail||cprT-cpr0>.3)&&(line(cx,cy,e.offsetX,e.offsetY),cx=e.offsetX,cy=e.offsetY)}function mouseNotMove(){_mouseMoving||line(cx,cy,cx,cy),_mouseMoving=!1}function mouseDown(e){if(cdown=!0,e&&e.touches&&e.touches.length){var t=document.getElementById("surface").getBoundingClientRect();cx=e.touches[0].clientX-t.left,cy=e.touches[0].clientY-t.top}_mouseInterval=setInterval(mouseNotMove,150)}function mouseUp(){clearInterval(_mouseInterval),cdown=!1,cprT=0,cpr1=0,sendData()}function windowResize(){var e=Frame.width/Frame.height,t=window.innerWidth-60,n=t/e;n>window.innerHeight-60&&(t=(n=window.innerHeight-60)*e),scale=Frame.width/t,document.getElementById("canvas").style.width=document.getElementById("next").style.width=document.getElementById("prev").style.width=t+"px",document.getElementById("surface").style.left=(window.innerWidth-60-t)/2+60+"px",document.getElementById("canvas").style.height=document.getElementById("next").style.height=document.getElementById("prev").style.height=n+"px",document.getElementById("surface").style.top=(window.innerHeight-60-n)/2+60+"px"}</script><style> .noUi-target, .noUi-target * { -webkit-touch-callout: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -webkit-user-select: none; -ms-touch-action: none; touch-action: none; -ms-user-select: none; -moz-user-select: none; user-select: none; -moz-box-sizing: border-box; box-sizing: border-box; }.noUi-target { position: relative;}.noUi-base,.noUi-connects { width: 100%; height: 100%; position: relative; z-index: 1;}/* Wrapper for all connect elements. */.noUi-connects { overflow: hidden; z-index: 0;}.noUi-connect,.noUi-origin { will-change: transform; position: absolute; z-index: 1; top: 0; right: 0; -ms-transform-origin: 0 0; -webkit-transform-origin: 0 0; -webkit-transform-style: preserve-3d; transform-origin: 0 0; transform-style: flat;}.noUi-connect { height: 100%; width: 100%;}.noUi-origin { height: 10%; width: 10%;}/* Offset direction */.noUi-txt-dir-rtl.noUi-horizontal .noUi-origin { left: 0; right: auto;}/* Give origins 0 height/width so they don't interfere with clicking the * connect elements. */.noUi-vertical .noUi-origin { width: 0;}.noUi-horizontal .noUi-origin { height: 0;}.noUi-handle { -webkit-backface-visibility: hidden; backface-visibility: hidden; position: absolute;}.noUi-touch-area { height: 100%; width: 100%;}.noUi-state-tap .noUi-connect,.noUi-state-tap .noUi-origin { -webkit-transition: transform 0.3s; transition: transform 0.3s;}.noUi-state-drag * { cursor: inherit !important;}/* Slider size and handle placement; */.noUi-horizontal { height: 18px;}.noUi-horizontal .noUi-handle { width: 40px; height: 40px; right: -20px; top: -11px; border-radius: 20px; background: #FFF url('https://static.tumblr.com/hzedn23/7WHqawjnx/icons.gif') no-repeat; background-position-y: 0px;}.noUi-vertical { width: 18px;}.noUi-vertical .noUi-handle { width: 28px; height: 34px; right: -6px; top: -17px;}.noUi-txt-dir-rtl.noUi-horizontal .noUi-handle { left: -17px; right: auto;}/* Styling; * Giving the connect element a border radius causes issues with using transform: scale */.noUi-target { background: #555; border-radius: 4px;}.noUi-connects { border-radius: 3px;}.noUi-connect { background: #aaa;}/* Handles and cursors; */.noUi-draggable { cursor: ew-resize;}.noUi-vertical .noUi-draggable { cursor: ns-resize;}.noUi-handle { background: #FFF; cursor: default;}.noUi-active {}.noUi-vertical .noUi-handle:before,.noUi-vertical .noUi-handle:after { width: 14px; height: 1px; left: 6px; top: 14px;}.noUi-vertical .noUi-handle:after { top: 17px;}/* Disabled state; */[disabled] .noUi-connect { background: #B8B8B8;}[disabled].noUi-target,[disabled].noUi-handle,[disabled] .noUi-handle { cursor: not-allowed;}/* Base; * */.noUi-pips,.noUi-pips * { -moz-box-sizing: border-box; box-sizing: border-box;}.noUi-pips { position: absolute; color: #999;}/* Values; * */.noUi-value { position: absolute; white-space: nowrap; text-align: center;}.noUi-value-sub { color: #ccc; font-size: 10px;}/* Markings; * */.noUi-marker { position: absolute; background: #CCC;}.noUi-marker-sub { background: #AAA;}.noUi-marker-large { background: #AAA;}/* Horizontal layout; * */.noUi-pips-horizontal { padding: 10px 0; height: 80px; top: 100%; left: 0; width: 100%;}.noUi-value-horizontal { -webkit-transform: translate(-50%, 50%); transform: translate(-50%, 50%);}.noUi-rtl .noUi-value-horizontal { -webkit-transform: translate(50%, 50%); transform: translate(50%, 50%);}.noUi-marker-horizontal.noUi-marker { margin-left: -1px; width: 2px; height: 5px;}.noUi-marker-horizontal.noUi-marker-sub { height: 10px;}.noUi-marker-horizontal.noUi-marker-large { height: 15px;}/* Vertical layout; * */.noUi-pips-vertical { padding: 0 10px; height: 100%; top: 0; left: 100%;}.noUi-value-vertical { -webkit-transform: translate(0, -50%); transform: translate(0, -50%); padding-left: 25px;}.noUi-rtl .noUi-value-vertical { -webkit-transform: translate(0, 50%); transform: translate(0, 50%);}.noUi-marker-vertical.noUi-marker { width: 5px; height: 2px; margin-top: -1px;}.noUi-marker-vertical.noUi-marker-sub { width: 10px;}.noUi-marker-vertical.noUi-marker-large { width: 15px;}.noUi-tooltip { display: block; position: absolute; border: 1px solid #D9D9D9; border-radius: 3px; background: #fff; color: #000; padding: 5px; text-align: center; white-space: nowrap;}.noUi-horizontal .noUi-tooltip { -webkit-transform: translate(-50%, 0); transform: translate(-50%, 0); left: 50%; bottom: 120%;}.noUi-vertical .noUi-tooltip { -webkit-transform: translate(0, -50%); transform: translate(0, -50%); top: 50%; right: 120%;}body { padding: 20px; overflow: hidden; background: #222; color: #fff;}#left { left: 0px; position: fixed; top: 60px; width: 60px; text-align: center;}#top { position: fixed; left: 0px; top: 0px; width: 100%;}#surface { position: fixed; left: 60px; top: 60px;}#surface * { user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; -o-user-select: none; position: absolute; left: 0px; top: 0psx;}.square { width: 60px; height: 60px; float: left; background-color: #555; display: inline-block;}.color { float: right !important;}.frame {}.square span { display: table-cell; vertical-align: middle; height: 60px; text-align: center; width: 60px; user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; -o-user-select: none;}#onion { pointer-events: none;}#onion img { position: absolute; left: 0px; top: 0px; opacity: 0.3; pointer-events: none; mix-blend-mode: lighten;}.selected { -webkit-box-shadow:inset 0px 0px 0px 8px #fff; -moz-box-shadow:inset 0px 0px 0px 8px #fff; box-shadow:inset 0px 0px 0px 8px #fff;}.toggled { background-color: #aaa !important;}.icon { background-image: url('https://static.tumblr.com/hzedn23/7WHqawjnx/icons.gif'); background-repeat: no-repeat; background-position: 0px -40px;}#brush { width: 200px; margin: 21px 50px; float: left;}#logo { background: none; width: 120px;}</style></head><body onload="init();" scroll="no" onresize="windowResize()"><div id="surface"> <canvas id="canvas" class="blend" width="640" height="480" onmousemove="mouseMove(event)" onmousedown="mouseDown()" onmouseup="mouseUp()" onmouseleave="mouseUp()" ontouchstart="mouseDown(event)" ontouchmove="touchMove(event)" ontouchend="mouseUp()"></canvas> <div id="onion"> <img id="prev" /> <img id="next" class="blend" /> </div></div><div id="top"> <div class="square" id="logo"></div> <div id="brush"></div> <div class="square toggled icon" onclick="switchOnion(this)" style="background-position-x:-180px"></div> <div class="square icon" onclick="switchHalftone(this)" style="background-position-x:-240px"></div> <div id="palette"></div></div><div id="left"> <div class="square frame icon" onclick="switchFrame(-1,true)" style="background-position-x:-120px"></div> <div class="square frame icon" onclick="switchFrame(1,true)" style="background-position-x:-60px"></div> <div id="frames"></div></div><div id="hidden"></div></body></html>
